"use strict";
(self["webpackChunkconsulta_cep"] = self["webpackChunkconsulta_cep"] || []).push([[143],{

/***/ 103:
/***/ ((__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {


;// CONCATENATED MODULE: ./src/images/sunny.svg
const sunny_namespaceObject = "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgOTYgOTYwIDk2MCIgd2lkdGg9IjQ4Ij48cGF0aCBkPSJNNDUwIDI0NlYxMzZoNjB2MTEwaC02MFptMCA3NzBWOTA2aDYwdjExMGgtNjBabTM2MC00MTB2LTYwaDExMHY2MEg4MTBabS03NzAgMHYtNjBoMTEwdjYwSDQwWm03MDItMjUwLTQzLTQzIDY2LTY2IDQzIDQzLTY2IDY2Wk0xOTUgOTA1bC00My00MyA2Ni02NiA0MyA0My02NiA2NlptNTcwIDAtNjYtNjYgNDMtNDMgNjYgNjYtNDMgNDNaTTIxOCAzNTZsLTY2LTY2IDQzLTQzIDY2IDY2LTQzIDQzWm0yNjEuODI0IDQ0NVEzODYgODAxIDMyMC41IDczNS4zMjQgMjU1IDY2OS42NDcgMjU1IDU3NS44MjMgMjU1IDQ4MiAzMjAuNjc2IDQxNi41cTY1LjY3Ny02NS41IDE1OS41LTY1LjVRNTc0IDM1MSA2MzkuNSA0MTYuNjc3cTY1LjUgNjUuNjc2IDY1LjUgMTU5LjVRNzA1IDY3MCA2MzkuMzIzIDczNS41IDU3My42NDcgODAxIDQ3OS44MjQgODAxWm0uMTEtNjBRNTQ5IDc0MSA1OTcgNjkzLjA2NnQ0OC0xMTdRNjQ1IDUwNyA1OTcuMDY2IDQ1OXQtMTE3LTQ4UTQxMSA0MTEgMzYzIDQ1OC45MzR0LTQ4IDExN1EzMTUgNjQ1IDM2Mi45MzQgNjkzdDExNyA0OFpNNDgwIDU3NloiIGZpbGw9IiMzYzYyNTUiLz48L3N2Zz4=";
;// CONCATENATED MODULE: ./src/images/rainy.svg
const rainy_namespaceObject = "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgOTYgOTYwIDk2MCIgd2lkdGg9IjQ4Ij48cGF0aCBkPSJNNTU4IDk3M3EtMTEgNS0yMy41IDFUNTE3IDk1OWwtNjktMTM4cS01LTExLTEuNS0yMy41VDQ2MSA3ODBxMTEtNSAyMy41LTF0MTcuNSAxNWw2OSAxMzhxNSAxMSAxLjUgMjMuNVQ1NTggOTczWm0yNDAtMXEtMTEgNS0yMy41IDFUNzU3IDk1OGwtNjktMTM4cS01LTExLTEuNS0yMy41VDcwMSA3NzlxMTEtNSAyMy41LTF0MTcuNSAxNWw2OSAxMzhxNSAxMSAxLjUgMjMuNVQ3OTggOTcyWm0tNDgwIDBxLTExIDUtMjMuNSAxLjVUMjc3IDk1OWwtNjktMTM4cS01LTExLTEtMjMuNXQxNS0xNy41cTExLTUgMjMuNS0xLjVUMjYzIDc5M2w2OSAxMzlxNSAxMSAxIDIzdC0xNSAxN1ptLTI4LTI1NnEtODcgMC0xNDguNS02MS41VDgwIDUwNnEwLTc5IDU2LjUtMTQxVDI3NyAyOTdxMzItNTYgODQuNS04OC41VDQ4MCAxNzZxOTEgMCAxNTIuNSA1Ny41VDcwOCAzNzZxNzkgNCAxMjUuNSA1My41VDg4MCA1NDZxMCA3MC00OS41IDEyMFQ3MTAgNzE2SDI5MFptMC02MGg0MjBxNDYgMCA3OC0zMi41dDMyLTc3LjVxMC00Ni0zMi03OHQtNzgtMzJoLTYwdi0zMHEwLTcxLTQ5LjUtMTIwLjVUNDgwIDIzNnEtNTEgMC05My41IDI3LjVUMzI0IDMzOGwtOCAxOGgtMjhxLTYyIDItMTA1IDQ1LjVUMTQwIDUwNnEwIDYyIDQ0IDEwNnQxMDYgNDRabTE5MC0yMTBaIiBmaWxsPSIjM2M2MjU1Ii8+PC9zdmc+";
;// CONCATENATED MODULE: ./src/images/thunderstorm.svg
const thunderstorm_namespaceObject = "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgOTYgOTYwIDk2MCIgd2lkdGg9IjQ4Ij48cGF0aCBkPSJtNDc1IDEwNTYgOTctMTEwLTgwLTQwIDExMy0xMzBoODBsLTk3IDExMCA4MCA0MC0xMTMgMTMwaC04MFptLTI0MCAwIDk3LTExMC04MC00MCAxMTMtMTMwaDgwbC05NyAxMTAgODAgNDAtMTEzIDEzMGgtODBabTU1LTM0MHEtODYuODY0IDAtMTQ4LjQzMi02MS41MlE4MCA1OTIuOTYgODAgNTA2LjE2NSA4MCA0MjcgMTM2LjUgMzY1IDE5MyAzMDMgMjc3IDI5N3EzMi01NiA4NC41LTg4LjVUNDgwLjQyMyAxNzZRNTcxIDE3NiA2MzIuNSAyMzMuNVQ3MDggMzc2cTc5IDQgMTI1LjUgNTMuNVQ4ODAgNTQ1LjYyM1E4ODAgNjE2IDgzMC40MTcgNjY2IDc4MC44MzMgNzE2IDcxMCA3MTZIMjkwWm0wLTYwaDQyMHE0Ni4yIDAgNzguMS0zMi41IDMxLjktMzIuNSAzMS45LTc4VDc4OC4xIDQ2OHEtMzEuOS0zMi03OC4xLTMyaC02MHYtMzBxMC03MS00OS41LTEyMC41VDQ4MC4yMTIgMjM2cS01MS40ODEgMC05My44NDcgMjcuNVEzNDQgMjkxIDMyNCAzMzhsLTggMThoLTI4cS02MiAyLTEwNSA0NS4zOTN0LTQzIDEwNC40NjRRMTQwIDU2OCAxODMuOTI5IDYxMiAyMjcuODU3IDY1NiAyOTAgNjU2Wm0xOTAtMjEwWiIgZmlsbD0iIzNjNjI1NSIvPjwvc3ZnPg==";
;// CONCATENATED MODULE: ./src/images/cloudy.svg
const cloudy_namespaceObject = "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgOTYgOTYwIDk2MCIgd2lkdGg9IjQ4Ij48cGF0aCBkPSJNMjUxIDg5NnEtODggMC0xNDkuNS02MS41VDQwIDY4NXEwLTc4IDUwLTEzN3QxMjctNzFxMjAtOTcgOTQtMTU4LjVUNDgyIDI1N3ExMTIgMCAxODkgODEuNVQ3NDggNTM0djI0cTcyLTIgMTIyIDQ2LjVUOTIwIDcyN3EwIDY5LTUwIDExOXQtMTE5IDUwSDI1MVptMC02MGg1MDBxNDUgMCA3Ny0zMnQzMi03N3EwLTQ1LTMyLTc3dC03Ny0zMmgtNjN2LTg0cTAtOTEtNjEtMTU0dC0xNDktNjNxLTg4IDAtMTQ5LjUgNjNUMjY3IDUzNGgtMTlxLTYyIDAtMTA1IDQzLjVUMTAwIDY4NXEwIDYzIDQ0IDEwN3QxMDcgNDRabTIyOS0yNjBaIiBmaWxsPSIjM2M2MjU1Ii8+PC9zdmc+";
;// CONCATENATED MODULE: ./src/images/foggy.svg
const foggy_namespaceObject = "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgOTYgOTYwIDk2MCIgd2lkdGg9IjQ4Ij48cGF0aCBkPSJNNzIwIDg1MXEtMTQgMC0yNC41LTEwLjVUNjg1IDgxNnEwLTE0IDEwLjUtMjQuNVQ3MjAgNzgxcTE0IDAgMjQuNSAxMC41VDc1NSA4MTZxMCAxNC0xMC41IDI0LjVUNzIwIDg1MVpNMjgwIDk3NnEtMTQgMC0yNC41LTEwLjVUMjQ1IDk0MXEwLTE0IDEwLjUtMjQuNVQyODAgOTA2cTE0IDAgMjQuNSAxMC41VDMxNSA5NDFxMCAxNC0xMC41IDI0LjVUMjgwIDk3NlptLTQwLTEyNXEtMTQgMC0yNC41LTEwLjVUMjA1IDgxNnEwLTE0IDEwLjUtMjQuNVQyNDAgNzgxaDM2MHExNCAwIDI0LjUgMTAuNVQ2MzUgODE2cTAgMTQtMTAuNSAyNC41VDYwMCA4NTFIMjQwWm0xNjAgMTI1cS0xNCAwLTI0LjUtMTAuNVQzNjUgOTQxcTAtMTQgMTAuNS0yNC41VDQwMCA5MDZoMjgwcTE0IDAgMjQuNSAxMC41VDcxNSA5NDFxMCAxNC0xMC41IDI0LjVUNjgwIDk3Nkg0MDBaTTI5MCA3MTZxLTg2Ljg2NCAwLTE0OC40MzItNjEuNTJRODAgNTkyLjk2IDgwIDUwNi4xNjUgODAgNDI3IDEzNi41IDM2NSAxOTMgMzAzIDI3NyAyOTdxMzItNTYgODQuNS04OC41VDQ4MC40MjMgMTc2UTU3MSAxNzYgNjMyLjUgMjMzLjVUNzA4IDM3NnE3OSA0IDEyNS41IDUzLjVUODgwIDU0NS42MjNRODgwIDYxNiA4MzAuNDE3IDY2NiA3ODAuODMzIDcxNiA3MTAgNzE2SDI5MFptMC02MGg0MjBxNDYuMiAwIDc4LjEtMzIuNSAzMS45LTMyLjUgMzEuOS03OFQ3ODguMSA0NjhxLTMxLjktMzItNzguMS0zMmgtNjB2LTMwcTAtNzEtNDkuNS0xMjAuNVQ0ODAuMjEyIDIzNnEtNTEuNDgxIDAtOTMuODQ3IDI3LjVRMzQ0IDI5MSAzMjQgMzM4bC04IDE4aC0yOHEtNjIgMi0xMDUgNDUuMzkzdC00MyAxMDQuNDY0UTE0MCA1NjggMTgzLjkyOSA2MTIgMjI3Ljg1NyA2NTYgMjkwIDY1NlptMTkwLTIxMFoiIGZpbGw9IiMzYzYyNTUiLz48L3N2Zz4=";
;// CONCATENATED MODULE: ./src/index.js







// Mudança de tema

const buttonToggleTheme = document.querySelector("#l-themeToggle");

let theme = "light";
const themes = {};

themes[theme] = document.querySelector("#theme");

async function loadTheme(newTheme) {
  console.log(`CHANGE THEME - ${newTheme}`);

  const themeElement = document.querySelector("#theme");

  if (themeElement) {
    themeElement.remove();
  }

  if (themes[newTheme]) {
    console.log(`THEME ALREADY LOADED - ${newTheme}`);

    document.head.appendChild(themes[newTheme]);

    return;
  }

  if (newTheme === "dark") {
    console.log(`LOADING THEME - ${newTheme}`);

    __webpack_require__.e(/* import() | dark */ 588).then(__webpack_require__.bind(__webpack_require__, 515)).then(() => {
      themes[newTheme] = document.querySelector("#theme");

      console.log(`LOADED - ${newTheme}`);
    });
  }
}

buttonToggleTheme.onclick = () => {
  if (theme === "light") {
    theme = "dark";
  } else {
    theme = "light";
  }

  loadTheme(theme);
};

// Variavéis gerais

const src_form = document.querySelector("#l-form");

const errorBlock = document.querySelector("#l-error");

// CEP

const cepInfoBlock = document.querySelector("#l-cepInfo");
const cidade = document.querySelector("#l-city");
const uf = document.querySelector("#l-state");
const endereco = document.querySelector("#l-street");
const bairro = document.querySelector("#l-district");
const cep = document.querySelector("#l-postalCode");

// Clima

const climaInfoBlock = document.querySelector("#l-weatherBox");
const temperaturaAtual = document.querySelector("#l-temperature");
const temperaturaMin = document.querySelector("#l-temperatureMin");
const temperaturaMax = document.querySelector("#l-temperatureMax");
const humidade = document.querySelector("#l-humidity");
const climaImg = document.querySelector("#l-weatherIcon");
const descricao = document.querySelector("#l-weatherIconDescription");

// Função CEP

async function consultaCep(cep) {
  const cepFormatado = cep.replace(/\D/g, "");

  const validaCep = /^[0-9]{8}$/;

  if (validaCep.test(cepFormatado)) {
    const request = await fetch(
      `https://viacep.com.br/ws/${cepFormatado}/json/`
    )
      .then((response) => {
        return response.json();
      })
      .then((data) => {
        return data;
      });
    return request;
  } else {
    return 0;
  }
}

// Função Clima

async function consultaClima(cidade) {
  const APIKey = "d5f0ed0441a05792c3ecdd9f0330292d";

  const request = await fetch(
    `https://api.openweathermap.org/data/2.5/weather?q=${cidade}&units=metric&appid=${APIKey}&lang=pt_br`
  )
    .then((response) => response.json())
    .then((json) => {
      if (json.cod === "404") {
        console.log("Erro ao puxar as informações de clima!");
        return 0;
      }

      return json;
    });

  return request;
}

src_form.addEventListener("submit", async (e) => {
  e.preventDefault();

  const inputValue = src_form[0].value;

  const pesquisaCep = await consultaCep(inputValue);

  if (pesquisaCep.erro || pesquisaCep === 0) {
    src_form[0].value = "";

    errorBlock.style.display = "block";
    errorBlock.classList.add("fadeIn");

    setTimeout(() => {
      errorBlock.classList.remove("fadeIn");
      errorBlock.animate(
        [
          {
            opacity: 1,
            scale: 1,
          },
          {
            opacity: 0,
            scale: 0,
          },
        ],
        500
      ).onfinish = () => {
        errorBlock.style.display = "";
      };
    }, 3000);

    cepInfoBlock.style.display = "none";
    climaInfoBlock.style.display = "none";

    return;
  }

  src_form[0].value = "";

  cepInfoBlock.style.display = "block";
  cepInfoBlock.classList.add("fadeIn");

  cidade.innerHTML = `<strong>Cidade:</strong> ${pesquisaCep.localidade}`;
  uf.innerHTML = `<strong>UF:</strong> ${pesquisaCep.uf}`;
  endereco.innerHTML = `<strong>Logradouro:</strong> ${pesquisaCep.logradouro}`;
  bairro.innerHTML = `<strong>Bairro:</strong> ${pesquisaCep.bairro}`;
  cep.innerHTML = `<strong>CEP:</strong> ${pesquisaCep.cep}`;

  const climaInfo = await consultaClima(pesquisaCep.localidade);

  if (climaInfo == 0) {
    return;
  }

  climaInfoBlock.style.display = "block";
  climaInfoBlock.classList.add("fadeIn");

  switch (climaInfo.weather[0].main) {
    case "Clear":
      climaImg.src = `${sunny_namespaceObject}`;
      break;
    case "Rain":
      climaImg.src = `${rainy_namespaceObject}`;
      break;
    case "Thunderstorm":
      climaImg.src = `${thunderstorm_namespaceObject}`;
      break;
    case "Clouds":
      climaImg.src = `${cloudy_namespaceObject}`;
      break;
    case "Haze":
      climaImg.src = `${foggy_namespaceObject}`;
      break;
    default:
      climaImg.src = "";
  }

  temperaturaAtual.innerHTML = `<strong>Atual:</strong> ${parseInt(
    climaInfo.main.temp
  )} °C`;
  temperaturaMin.innerHTML = `<strong>Mínima:</strong> ${parseInt(
    climaInfo.main.temp_min
  )} °C`;
  temperaturaMax.innerHTML = `<strong>Máxima:</strong> ${parseInt(
    climaInfo.main.temp_max
  )} °C`;
  humidade.innerHTML = `<strong>Humidade:</strong> ${climaInfo.main.humidity}%`;
  descricao.innerHTML = `<strong>${
    climaInfo.weather[0].description.charAt(0).toUpperCase() +
    climaInfo.weather[0].description.slice(1)
  }</strong>`;
});


/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ var __webpack_exports__ = (__webpack_exec__(103));
/******/ }
]);